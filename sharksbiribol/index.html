<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Sharks Biribol Score</title>

<meta name="theme-color" id="themeColor" content="#020617">
<link rel="manifest" href="manifest.json">

<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">

<style>
html{height:100%;}
:root{
  --bg:#020617;
  --text:#ffffff;
  --blue:#2563eb;
  --red:#dc2626;
  --blue-bg:rgba(37,99,235,.08);
  --red-bg:rgba(220,38,38,.08);
  --panel:rgba(255,255,255,.2);
}

body.light{
  --bg:#f8fafc;
  --text:#020617;
  --panel:rgba(0,0,0,.15);
}

*{
  box-sizing:border-box;
  font-family:Arial,Helvetica,sans-serif;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  height:100vh;
  overflow:hidden;
}

/* TOP SETS */
.top{
  position:absolute;
  top:2vh;
  left:0;
  right:0;
  display:flex;
  z-index:10;
}

.logo{
  position:absolute;
  top:1vh;
  left:0;
  right:0;
  display:flex;
  justify-content:center;
  z-index:10;
  pointer-events:none;
}

.logo img{
  width:clamp(120px,18vw,360px);
  max-height:18vw;
  aspect-ratio:1/1;
}

.set-group{
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:1vh;
  height:40px;
}

.set-value{
  font-size:clamp(1.8rem,4vh,2.8rem);
  min-width:40px;
  text-align:center;
  font-weight:bold;
}

.set-group button{
  width:42px;
  height:42px;
  border-radius:10px;
  border:none;
  background:var(--panel);
  color:var(--text);
  display:none;
  align-items:center;
  justify-content:center;
}

.set-group.active button{
  display:flex;
}

/* MAIN */
.main{
  display:flex;
  height:100%;
}

.side{
  flex:1;
  position:relative;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
}

.side.blue{ background:var(--blue-bg); }
.side.red{ background:var(--red-bg); }

/* SCORE */
.score{
  font-size:clamp(14rem,50vh,36rem);
  font-weight:bold;
  line-height:1;
  pointer-events:none;
}

.score.blue{ color:var(--blue); }
.score.red{ color:var(--red); }

/* SCORE BUTTONS */
.score-btn{
  position:absolute;
  width:75px;
  height:75px;
  border:none;
  border-radius:18px;
  background:var(--panel);
  color:var(--text);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:20;
}

.score-btn:active{
  transform:scale(0.95);
}

.top-left{ top:2vh; left:2vw; }
.bottom-left{ bottom:2vh; left:2vw; }

.top-right{ top:2vh; right:2vw; }
.bottom-right{ bottom:2vh; right:2vw; }

/* CONTROLS */
.controls{
  position:absolute;
  bottom:2vh;
  left:50%;
  transform:translateX(-50%);
  display:none;
  gap:2vh;
  z-index:10;
}

.controls.active{ display:flex; }

.controls button{
  width:48px;
  height:48px;
  border-radius:12px;
  border:none;
  background:var(--panel);
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
}

/* MATERIAL ICON */
.material-symbols-outlined{
  font-size:38px;
}

.material-symbols-outlined.bigger{ 
  font-size:52px;
}
</style>
</head>

<body>

<div class="top">
  <div class="set-group" id="setGroupLeft">
    <button onclick="changeSet('left', -1)">
      <span class="material-symbols-outlined">remove</span>
    </button>
    <div class="set-value" id="setLeft">0</div>
    <button onclick="changeSet('left', 1)">
      <span class="material-symbols-outlined">add</span>
    </button>
  </div>

  <div class="logo">
    <img src="logo.png" alt="Logo">
  </div>

  <div class="set-group" id="setGroupRight">
    <button onclick="changeSet('right', -1)">
      <span class="material-symbols-outlined">remove</span>
    </button>
    <div class="set-value" id="setRight">0</div>
    <button onclick="changeSet('right', 1)">
      <span class="material-symbols-outlined">add</span>
    </button>
  </div>
</div>

<div class="main" id="main">

  <div class="side blue" id="leftSide">
    <div class="score blue" id="scoreLeft">0</div>

    <button class="score-btn top-left" onclick="addScore('left')">
      <span class="material-symbols-outlined bigger">add_2</span>
    </button>

    <button class="score-btn bottom-left" onclick="subScore('left')">
      <span class="material-symbols-outlined bigger">remove</span>
    </button>
  </div>

  <div class="side red" id="rightSide">
    <div class="score red" id="scoreRight">0</div>

    <button class="score-btn top-right" onclick="addScore('right')">
      <span class="material-symbols-outlined bigger">add_2</span>
    </button>

    <button class="score-btn bottom-right" onclick="subScore('right')">
      <span class="material-symbols-outlined bigger">remove</span>
    </button>
  </div>

</div>

<div class="controls" id="controls">
  <button onclick="confirmReset()">
    <span class="material-symbols-outlined">power_settings_new</span>
  </button>
  
  <button onclick="confirmNewGame()">
    <span class="material-symbols-outlined">sports_handball</span>
  </button>

  <button onclick="swapSides()">
    <span class="material-symbols-outlined">swap_horiz</span>
  </button>

  <button onclick="toggleTheme()">
    <span class="material-symbols-outlined">dark_mode</span>
  </button>
</div>

<script>
const defaultState = {
  left:{score:0, sets:0, color:'blue'},
  right:{score:0, sets:0, color:'red'},
  theme:'dark'
};

let state = JSON.parse(localStorage.getItem('scoreboard')) || structuredClone(defaultState);

const scoreLeft = document.getElementById('scoreLeft');
const scoreRight = document.getElementById('scoreRight');
const setLeft = document.getElementById('setLeft');
const setRight = document.getElementById('setRight');
const leftSide = document.getElementById('leftSide');
const rightSide = document.getElementById('rightSide');
const controls = document.getElementById('controls');
const setGroupLeft = document.getElementById('setGroupLeft');
const setGroupRight = document.getElementById('setGroupRight');
const scoreButtons = document.querySelectorAll('.score-btn');

let uiActive = false;
let timer;

function save(){
  localStorage.setItem('scoreboard', JSON.stringify(state));
}

function render(){
  scoreLeft.textContent = state.left.score;
  scoreRight.textContent = state.right.score;
  setLeft.textContent = state.left.sets;
  setRight.textContent = state.right.sets;

  leftSide.className = `side ${state.left.color}`;
  rightSide.className = `side ${state.right.color}`;
  scoreLeft.className = `score ${state.left.color}`;
  scoreRight.className = `score ${state.right.color}`;

  document.body.className = state.theme === 'light' ? 'light' : '';
  document.getElementById('themeColor').content =
    state.theme === 'light' ? '#f8fafc' : '#020617';
}

function addScore(side){
  if(!uiActive) return;
  state[side].score++;
  save(); render();
}

function subScore(side){
  if(!uiActive) return;
  if(state[side].score > 0) state[side].score--;
  save(); render();
}

function changeSet(side, delta){
  state[side].sets = Math.max(0, state[side].sets + delta);
  save(); render();
}

function confirmNewGame(){
  if(confirm('Iniciar novo jogo?')){
    state.left.score = 0;
    state.right.score = 0;
    save(); render();
  }
}

function confirmReset(){
  if(confirm('Resetar placar e sets?')){
    state = structuredClone(defaultState);
    save(); render();
  }
}

function swapSides(){
  [state.left, state.right] = [state.right, state.left];
  save(); render();
}

function toggleTheme(){
  state.theme = state.theme === 'dark' ? 'light' : 'dark';
  save(); render();
}

function showUI(){
  if(!uiActive){
    uiActive = true;
    controls.classList.add('active');
    setGroupLeft.classList.add('active');
    setGroupRight.classList.add('active');
    scoreButtons.forEach(btn => btn.style.display = 'flex');
  }

  clearTimeout(timer);
  timer = setTimeout(hideUI, 2000);
}

function hideUI(){
  uiActive = false;
  controls.classList.remove('active');
  setGroupLeft.classList.remove('active');
  setGroupRight.classList.remove('active');
  scoreButtons.forEach(btn => btn.style.display = 'none');
}

document.getElementById('main').addEventListener('click', showUI);
document.getElementById('main').addEventListener('touchstart', showUI);

render();
</script>

</body>
</html>